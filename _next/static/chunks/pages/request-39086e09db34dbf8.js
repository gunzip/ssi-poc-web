(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[800],{1916:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/request",function(){return e(8)}])},8:function(n,t,e){"use strict";e.r(t);var r=e(5666),u=e.n(r),o=e(5893),a=e(1163),c=e(7318),s=e(7294),i=e(8767),f=e(3907),l=e(8269),h=e(8527),p=e(2846),d=e(8288),v=e(8764).Buffer;function m(n,t,e,r,u,o,a){try{var c=n[o](a),s=c.value}catch(i){return void e(i)}c.done?t(s):Promise.resolve(s).then(r,u)}function w(n){return function(){var t=this,e=arguments;return new Promise((function(r,u){var o=n.apply(t,e);function a(n){m(o,r,u,a,c,"next",n)}function c(n){m(o,r,u,a,c,"throw",n)}a(void 0)}))}}function x(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=[],r=!0,u=!1,o=void 0;try{for(var a,c=n[Symbol.iterator]();!(r=(a=c.next()).done)&&(e.push(a.value),!t||e.length!==t);r=!0);}catch(s){u=!0,o=s}finally{try{r||null==c.return||c.return()}finally{if(u)throw o}}return e}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var g=function(n){var t=[];return new Promise((function(e,r){n.on("data",(function(n){return t.push(n)})),n.on("error",r),n.on("end",(function(){return e(v.concat(t).toString("base64"))}))}))};t.default=function(){var n=(0,a.useRouter)(),t=(0,s.useState)(),e=t[0],r=t[1],v=(0,s.useState)(!1),m=v[0],y=v[1],b=x((0,f.Z)("auth"),1)[0],_=x((0,f.Z)("state"),1)[0];return(0,s.useEffect)((function(){setTimeout((function(){return y(!0)}),2e4)}),[]),(0,l.Z)(w(u().mark((function n(){var t,e;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=(0,c.image)(JSON.stringify(b),{type:"png"}),n.next=3,g(t);case 3:e=n.sent,r(e);case 5:case"end":return n.stop()}}),n)})))),(0,i.useQuery)(["authres",_],w(u().mark((function n(){var t;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://43arh28uwa.execute-api.eu-south-1.amazonaws.com/test/poll/".concat(_));case 2:if(!(t=n.sent).ok){n.next=8;break}return console.log(t.status),n.abrupt("return",t.text());case 8:throw console.log(t.status),new Error("ERROR");case 10:case"end":return n.stop()}}),n)}))),{enabled:m,refetchInterval:5e3,onSuccess:function(){n.push("/success")}}),(0,o.jsxs)(h.Kq,{spacing:10,direction:["column","column","column","row"],children:[(0,o.jsx)(h.gC,{pt:5,spacing:10,children:(0,o.jsxs)(h.W2,{centerContent:!0,children:[(0,o.jsx)(h.xv,{as:"p",mb:5,size:"m",fontWeight:"bold",children:"Inquadra il QRCode per autorizzare la richiesta con IO Wallet."}),e&&(0,o.jsx)("img",{src:"data:image/png;base64,".concat(e),style:{maxWidth:"300px"},alt:"qrcode"})]})}),(0,o.jsx)(h.xu,{children:(0,o.jsx)(p.m$.img,{src:"".concat(d.V,"/avis-sangue.jpeg"),borderRadius:"2xl"})})]})}},2361:function(){},4616:function(){}},function(n){n.O(0,[326,774,888,179],(function(){return t=1916,n(n.s=t);var t}));var t=n.O();_N_E=t}]);