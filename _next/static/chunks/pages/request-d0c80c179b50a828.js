(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[800],{1916:function(n,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/request",function(){return r(4659)}])},4659:function(n,t,r){"use strict";r.r(t),r.d(t,{default:function(){return b}});var e=r(5666),u=r.n(e),o=r(5893),a=r(1163),c=r(7318),i=r(7294),s=r(8767);var f=function(){return(f=Object.assign||function(n){for(var t,r=1,e=arguments.length;r<e;r++)for(var u in t=arguments[r])Object.prototype.hasOwnProperty.call(t,u)&&(n[u]=t[u]);return n}).apply(this,arguments)};Object.create;Object.create;function l(n,t,r){void 0===t&&(t=[]),void 0===r&&(r={loading:!1});var e=(0,i.useRef)(0),u=function(){var n=(0,i.useRef)(!1),t=(0,i.useCallback)((function(){return n.current}),[]);return(0,i.useEffect)((function(){return n.current=!0,function(){n.current=!1}}),[]),t}(),o=(0,i.useState)(r),a=o[0],c=o[1],s=(0,i.useCallback)((function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o=++e.current;return a.loading||c((function(n){return f(f({},n),{loading:!0})})),n.apply(void 0,t).then((function(n){return u()&&o===e.current&&c({value:n,loading:!1}),n}),(function(n){return u()&&o===e.current&&c({error:n,loading:!1}),n}))}),t);return[a,s]}var d=r(3907),v=r(8527),p=r(2846),h=r(8288),g=r(8764).Buffer;function y(n,t,r,e,u,o,a){try{var c=n[o](a),i=c.value}catch(s){return void r(s)}c.done?t(i):Promise.resolve(i).then(e,u)}function w(n){return function(){var t=this,r=arguments;return new Promise((function(e,u){var o=n.apply(t,r);function a(n){y(o,e,u,a,c,"next",n)}function c(n){y(o,e,u,a,c,"throw",n)}a(void 0)}))}}function m(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=[],e=!0,u=!1,o=void 0;try{for(var a,c=n[Symbol.iterator]();!(e=(a=c.next()).done)&&(r.push(a.value),!t||r.length!==t);e=!0);}catch(i){u=!0,o=i}finally{try{e||null==c.return||c.return()}finally{if(u)throw o}}return r}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var x=function(n){var t=[];return new Promise((function(r,e){n.on("data",(function(n){return t.push(n)})),n.on("error",e),n.on("end",(function(){return r(g.concat(t).toString("base64"))}))}))},b=function(){var n=(0,a.useRouter)(),t=(0,i.useState)(),r=t[0],e=t[1],f=(0,i.useState)(!1),g=f[0],y=f[1],b=m((0,d.Z)("auth"),1)[0],S=m((0,d.Z)("state"),1)[0];return(0,i.useEffect)((function(){setTimeout((function(){return y(!0)}),2e4)}),[]),function(n,t){void 0===t&&(t=[]);var r=l(n,t,{loading:!0}),e=r[0],u=r[1];(0,i.useEffect)((function(){u()}),[u])}(w(u().mark((function n(){var t,r;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=(0,c.image)(JSON.stringify(b),{type:"png"}),n.next=3,x(t);case 3:r=n.sent,e(r);case 5:case"end":return n.stop()}}),n)})))),(0,s.useQuery)(["authres",S],w(u().mark((function n(){var t;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://43arh28uwa.execute-api.eu-south-1.amazonaws.com/test/poll/".concat(S));case 2:if(!(t=n.sent).ok){n.next=8;break}return console.log(t.status),n.abrupt("return",t.text());case 8:throw console.log(t.status),new Error("ERROR");case 10:case"end":return n.stop()}}),n)}))),{enabled:g,refetchInterval:5e3,onSuccess:function(){n.push("/success")}}),(0,o.jsxs)(v.Kq,{spacing:10,direction:["column","column","column","row"],children:[(0,o.jsx)(v.gC,{pt:5,spacing:10,children:(0,o.jsxs)(v.W2,{centerContent:!0,children:[(0,o.jsx)(v.xv,{as:"p",mb:5,size:"m",fontWeight:"bold",children:"Inquadra il QRCode per autorizzare la richiesta con IO Wallet."}),r&&(0,o.jsx)("img",{src:"data:image/png;base64,".concat(r),style:{maxWidth:"300px"},alt:"qrcode"})]})}),(0,o.jsx)(v.xu,{children:(0,o.jsx)(p.m$.img,{src:"".concat(h.V,"/avis-sangue.jpeg"),borderRadius:"2xl"})})]})}},1163:function(n,t,r){n.exports=r(387)},3907:function(n,t,r){"use strict";r.d(t,{Z:function(){return a}});var e=r(7294),u=function(){};var o="undefined"!==typeof window,a=function(n,t,r){if(!o)return[t,u,u];if(!n)throw new Error("useLocalStorage key may not be falsy");var a=r?r.raw?function(n){return n}:r.deserializer:JSON.parse,c=(0,e.useRef)((function(n){try{var e=r?r.raw?String:r.serializer:JSON.stringify,u=localStorage.getItem(n);return null!==u?a(u):(t&&localStorage.setItem(n,e(t)),t)}catch(i){return t}})),i=(0,e.useState)((function(){return c.current(n)})),s=i[0],f=i[1];(0,e.useLayoutEffect)((function(){return f(c.current(n))}),[n]);var l=(0,e.useCallback)((function(t){try{var e="function"===typeof t?t(s):t;if("undefined"===typeof e)return;var u=void 0;u=r?r.raw?"string"===typeof e?e:JSON.stringify(e):r.serializer?r.serializer(e):JSON.stringify(e):JSON.stringify(e),localStorage.setItem(n,u),f(a(u))}catch(i){}}),[n,f]),d=(0,e.useCallback)((function(){try{localStorage.removeItem(n),f(void 0)}catch(i){}}),[n,f]);return[s,l,d]}},2361:function(){},4616:function(){}},function(n){n.O(0,[318,774,888,179],(function(){return t=1916,n(n.s=t);var t}));var t=n.O();_N_E=t}]);